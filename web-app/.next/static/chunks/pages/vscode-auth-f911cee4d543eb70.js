(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[581],{3084:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/vscode-auth",function(){return s(5672)}])},5672:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var n=s(7876),i=s(9099),a=s(4232);function l(){let e=(0,i.useRouter)(),[t,s]=(0,a.useState)(null),[l,r]=(0,a.useState)("loading");(0,a.useEffect)(()=>{let{session_id:t}=e.query;t&&"string"==typeof t?(s(t),r("ready")):e.isReady&&r("error")},[e.query,e.isReady]);let c=async()=>{if(t){r("completing");try{let e=await fetch("/api/complete-vscode-auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:t})});e.ok?(r("completed"),setTimeout(()=>{window.close()},3e3)):(console.error("Authentication failed:",await e.text()),r("error"))}catch(e){console.error("VSCode authentication error:",e),r("error")}}};return"loading"===l?(0,n.jsx)("div",{className:"flex items-center justify-center min-h-screen w-full bg-cs-mint",children:(0,n.jsxs)("div",{className:"text-center bg-white p-8 rounded-lg shadow-xl max-w-md",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Loading..."}),(0,n.jsx)("p",{className:"text-gray-600",children:"Preparing VSCode authentication..."})]})}):"ready"===l?(0,n.jsx)("div",{className:"flex items-center justify-center min-h-screen w-full bg-cs-mint",children:(0,n.jsxs)("div",{className:"text-center bg-white p-8 rounded-lg shadow-xl max-w-md",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"CS 15 Tutor VSCode Authentication"}),(0,n.jsx)("p",{className:"mb-6 text-gray-600",children:"Click the button below to complete authentication for the CS 15 Tutor VSCode extension."}),(0,n.jsx)("button",{onClick:c,className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Complete Authentication"}),(0,n.jsx)("p",{className:"mt-4 text-sm text-gray-500",children:"This will authenticate your VSCode extension and you can close this tab afterwards."})]})}):"completing"===l?(0,n.jsx)("div",{className:"flex items-center justify-center min-h-screen w-full bg-cs-mint",children:(0,n.jsxs)("div",{className:"text-center bg-white p-8 rounded-lg shadow-xl max-w-md",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Completing Authentication..."}),(0,n.jsx)("div",{className:"flex justify-center mb-4",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}),(0,n.jsx)("p",{className:"text-gray-600",children:"Please wait while we complete your authentication..."})]})}):"completed"===l?(0,n.jsx)("div",{className:"flex items-center justify-center min-h-screen w-full bg-cs-mint",children:(0,n.jsxs)("div",{className:"text-center bg-white p-8 rounded-lg shadow-xl max-w-md",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold mb-4 text-green-600",children:"✅ Authentication Complete!"}),(0,n.jsx)("p",{className:"mb-4 text-gray-600",children:"Your VSCode extension has been successfully authenticated."}),(0,n.jsx)("p",{className:"text-sm text-gray-500",children:"You can now close this tab and use the CS 15 Tutor in VSCode."})]})}):(0,n.jsx)("div",{className:"flex items-center justify-center min-h-screen w-full bg-cs-mint",children:(0,n.jsxs)("div",{className:"text-center bg-white p-8 rounded-lg shadow-xl max-w-md",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold mb-4 text-red-600",children:"❌ Authentication Error"}),(0,n.jsx)("p",{className:"mb-6 text-gray-600",children:"There was an error with the authentication process. Please try again."}),(0,n.jsx)("button",{onClick:()=>window.close(),className:"bg-red-600 text-white px-6 py-3 rounded-lg hover:bg-red-700 transition-colors font-medium",children:"Close Tab"})]})})}},9099:(e,t,s)=>{e.exports=s(8253)}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(3084)),_N_E=e.O()}]);